(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[788],{97343:function(e,a,s){"use strict";s.d(a,{Zn:function(){return MainLayout}});var n=s(46011),l=s(90835),t=s(85893);let MainLayout=({children:e,showHeader:a=!0,showFooter:s=!0})=>(0,t.jsxs)("div",{className:"flex flex-col min-h-screen bg-white",children:[a&&(0,t.jsx)(n.Z,{}),(0,t.jsx)("main",{className:"flex-grow",children:e}),s&&(0,t.jsx)(l.Z,{})]})},39087:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return Cadastro}});var n=s(9008),l=s.n(n),t=s(41664),r=s.n(t),i=s(87066),d=s(67294),o=s(86501),c=s(97343),m=s(85893);function Cadastro(){let[e,a]=(0,d.useState)(!1),[s,n]=(0,d.useState)({name:"",email:"",phone:"",password:"",role:"cliente"}),[t,h]=(0,d.useState)({}),handleChange=e=>n({...s,[e.target.name]:e.target.value}),handleSubmit=async e=>{e.preventDefault();let n={};if(s.name||(n.name="Nome obrigat\xf3rio"),s.email||(n.email="Email obrigat\xf3rio"),(!s.password||s.password.length<8)&&(n.password="Senha m\xednima 8 caracteres"),h(n),!Object.keys(n).length){a(!0);try{let{data:e}=await i.Z.post("/api/auth/register",{...s});localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user)),o.ZP.success("Conta criada"),window.location.href="/dashboard"}catch(e){o.ZP.error(e.response?.data?.message||"Erro")}finally{a(!1)}}};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l(),{children:(0,m.jsx)("title",{children:"Cadastro - Leidy Cleaner"})}),(0,m.jsx)(c.Zn,{children:(0,m.jsx)("main",{className:"min-h-screen flex items-center justify-center py-16",children:(0,m.jsxs)("div",{className:"w-full max-w-md p-6 bg-white rounded-lg shadow",children:[(0,m.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Criar Conta"}),(0,m.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm",children:"Nome"}),(0,m.jsx)("input",{name:"name",value:s.name,onChange:handleChange,className:"w-full border px-3 py-2 rounded"}),t.name&&(0,m.jsx)("p",{className:"text-red-500 text-sm",children:t.name})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm",children:"Email"}),(0,m.jsx)("input",{name:"email",type:"email",value:s.email,onChange:handleChange,className:"w-full border px-3 py-2 rounded"}),t.email&&(0,m.jsx)("p",{className:"text-red-500 text-sm",children:t.email})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm",children:"Telefone"}),(0,m.jsx)("input",{name:"phone",value:s.phone,onChange:handleChange,className:"w-full border px-3 py-2 rounded"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm",children:"Tipo de Conta"}),(0,m.jsxs)("select",{name:"role",value:s.role,onChange:handleChange,className:"w-full border px-3 py-2 rounded",children:[(0,m.jsx)("option",{value:"cliente",children:"Cliente"}),(0,m.jsx)("option",{value:"funcionario",children:"Funcion\xe1rio"}),(0,m.jsx)("option",{value:"adm",children:"Administrador"})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm",children:"Senha"}),(0,m.jsx)("input",{name:"password",type:"password",value:s.password,onChange:handleChange,className:"w-full border px-3 py-2 rounded"}),t.password&&(0,m.jsx)("p",{className:"text-red-500 text-sm",children:t.password})]}),(0,m.jsx)("button",{type:"submit",disabled:e,className:"btn-primary w-full py-2",children:e?"Cadastrando...":"Criar conta"})]}),(0,m.jsxs)("p",{className:"mt-4 text-sm",children:["J\xe1 tem conta? ",(0,m.jsx)(r(),{href:"/login",className:"text-secondary-600",children:"Entrar"})]})]})})})]})}},92368:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cadastro",function(){return s(39087)}])}},function(e){e.O(0,[216,837,774,336,888,179],function(){return e(e.s=92368)}),_N_E=e.O()}]);