(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{30271:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Admin}});var a=t(67294),l=t(46011),d=t(90835),r=t(29557),n=t(98687),i=t(14195),o=t(3023),c=t(75358),x=t(99113),m=t(44469),h=t(79231),u=t(1752),g=t(75268),p=t(43815),b=t(38810),j=t(85893),Dashboard_AdminPanel=function(){let[e,s]=(0,a.useState)({totalBookings:0,revenue:0,customers:0,teamMembers:0,satisfaction:0}),[t,l]=(0,a.useState)([]),[d,f]=(0,a.useState)([]),[N,v]=(0,a.useState)([]),[y,w]=(0,a.useState)(!0),[D,C]=(0,a.useState)("current"),[k,E]=(0,a.useState)(!1),S=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"];(0,a.useEffect)(()=>{let fetchMetrics=async()=>{try{let e=await (0,b.k_)("/api/admin/dashboard",{method:"GET"});s(e),l(e.revenueByMonth||decodedFunction()),f(e.recentBookings||decodedFunction()),v(e.serviceBreakdown||decodedFunction()),w(!1)}catch(e){s({totalBookings:0,revenue:0,customers:0,teamMembers:0,satisfaction:0}),l(decodedFunction()),f(decodedFunction()),v(decodedFunction()),w(!1)}};fetchMetrics()},[]);let handleExportPDF=async()=>{E(!0);try{setTimeout(()=>{alert("\uD83D\uDCCA Relat\xf3rio PDF gerado com sucesso!"),E(!1)},1e3)}catch(e){E(!1)}},getStatusColor=e=>({confirmado:"bg-blue-100 text-blue-800",concluído:"bg-green-100 text-green-800",pendente:"bg-yellow-100 text-yellow-800",cancelado:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800";return y?(0,j.jsx)("div",{className:"p-6 text-center",children:"⏳ Carregando m\xe9tricas..."}):(0,j.jsxs)("div",{className:"space-y-6 p-6 bg-gray-50",children:[(0,j.jsxs)("div",{className:"flex justify-between items-center",children:[(0,j.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDCCA Painel Administrativo"}),(0,j.jsx)("button",{onClick:handleExportPDF,disabled:k,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:k?"⏳ Exportando...":"\uD83D\uDCE5 Exportar PDF"})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,j.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow hover:shadow-lg transition",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-gray-600 text-sm font-semibold",children:"Total Agendamentos"}),(0,j.jsx)("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:e.totalBookings})]}),(0,j.jsx)("span",{className:"text-4xl",children:"\uD83D\uDCC5"})]}),(0,j.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"↑ 12% vs m\xeas passado"})]}),(0,j.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow hover:shadow-lg transition",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-gray-600 text-sm font-semibold",children:"Receita Total"}),(0,j.jsxs)("p",{className:"text-3xl font-bold text-green-600 mt-2",children:["R$ ",(e.revenue/1e3).toFixed(1),"k"]})]}),(0,j.jsx)("span",{className:"text-4xl",children:"\uD83D\uDCB0"})]}),(0,j.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"↑ 8% vs m\xeas passado"})]}),(0,j.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow hover:shadow-lg transition",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-gray-600 text-sm font-semibold",children:"Clientes"}),(0,j.jsx)("p",{className:"text-3xl font-bold text-purple-600 mt-2",children:e.customers})]}),(0,j.jsx)("span",{className:"text-4xl",children:"\uD83D\uDC65"})]}),(0,j.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"↑ 5 novos clientes"})]}),(0,j.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow hover:shadow-lg transition",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-gray-600 text-sm font-semibold",children:"Equipe"}),(0,j.jsx)("p",{className:"text-3xl font-bold text-orange-600 mt-2",children:e.teamMembers})]}),(0,j.jsx)("span",{className:"text-4xl",children:"\uD83D\uDC54"})]}),(0,j.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"✅ Todos dispon\xedveis"})]}),(0,j.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow hover:shadow-lg transition",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-gray-600 text-sm font-semibold",children:"Satisfa\xe7\xe3o"}),(0,j.jsxs)("p",{className:"text-3xl font-bold text-red-600 mt-2",children:[e.satisfaction,"/5"]})]}),(0,j.jsx)("span",{className:"text-4xl",children:"⭐"})]}),(0,j.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Based on ",e.customers," reviews"]})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,j.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow",children:[(0,j.jsx)("h3",{className:"text-lg font-bold mb-4",children:"\uD83D\uDCC8 Receita por M\xeas"}),(0,j.jsx)(r.h,{width:"100%",height:300,children:(0,j.jsxs)(n.w,{data:t,children:[(0,j.jsx)(i.q,{strokeDasharray:"3 3"}),(0,j.jsx)(o.K,{dataKey:"month"}),(0,j.jsx)(c.B,{}),(0,j.jsx)(x.u,{formatter:e=>`R$ ${e}`}),(0,j.jsx)(m.D,{}),(0,j.jsx)(h.x1,{type:"monotone",dataKey:"revenue",stroke:"#3b82f6",strokeWidth:2,dot:{r:4}})]})})]}),(0,j.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow",children:[(0,j.jsx)("h3",{className:"text-lg font-bold mb-4",children:"\uD83C\uDFAF Distribui\xe7\xe3o de Servi\xe7os"}),(0,j.jsx)(r.h,{width:"100%",height:300,children:(0,j.jsxs)(u.u,{children:[(0,j.jsx)(g.by,{data:N,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,value:s})=>`${e} (${s}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:N.map((e,s)=>(0,j.jsx)(p.b,{fill:S[s%S.length]},`cell-${s}`))}),(0,j.jsx)(x.u,{})]})})]})]}),(0,j.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow",children:[(0,j.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,j.jsx)("h3",{className:"text-lg font-bold",children:"\uD83D\uDCCB Agendamentos Recentes"}),(0,j.jsxs)("select",{value:D,onChange:e=>C(e.target.value),className:"px-3 py-1 border rounded-lg text-sm",children:[(0,j.jsx)("option",{value:"current",children:"M\xeas Atual"}),(0,j.jsx)("option",{value:"last30",children:"\xdaltimos 30 dias"}),(0,j.jsx)("option",{value:"last90",children:"\xdaltimos 90 dias"})]})]}),(0,j.jsx)("div",{className:"overflow-x-auto",children:(0,j.jsxs)("table",{className:"w-full",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{className:"border-b-2 border-gray-200",children:[(0,j.jsx)("th",{className:"text-left py-3 px-4 font-semibold",children:"ID"}),(0,j.jsx)("th",{className:"text-left py-3 px-4 font-semibold",children:"Cliente"}),(0,j.jsx)("th",{className:"text-left py-3 px-4 font-semibold",children:"Servi\xe7o"}),(0,j.jsx)("th",{className:"text-left py-3 px-4 font-semibold",children:"Data"}),(0,j.jsx)("th",{className:"text-left py-3 px-4 font-semibold",children:"Status"}),(0,j.jsx)("th",{className:"text-left py-3 px-4 font-semibold",children:"Valor"})]})}),(0,j.jsx)("tbody",{children:d.map(e=>(0,j.jsxs)("tr",{className:"border-b hover:bg-gray-50 transition",children:[(0,j.jsx)("td",{className:"py-3 px-4 font-mono text-sm",children:e.id}),(0,j.jsx)("td",{className:"py-3 px-4",children:e.client}),(0,j.jsx)("td",{className:"py-3 px-4 text-sm",children:e.service}),(0,j.jsx)("td",{className:"py-3 px-4 text-sm",children:new Date(e.date).toLocaleDateString("pt-BR")}),(0,j.jsx)("td",{className:"py-3 px-4",children:(0,j.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${getStatusColor(e.status)}`,children:e.status})}),(0,j.jsxs)("td",{className:"py-3 px-4 font-semibold",children:["R$ ",e.value.toFixed(2)]})]},e.id))})]})})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,j.jsxs)("button",{className:"p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg shadow hover:shadow-md transition text-left border border-blue-200",children:[(0,j.jsx)("p",{className:"font-bold text-lg",children:"\uD83D\uDCCA Relat\xf3rios"}),(0,j.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"An\xe1lise de receita e despesas"})]}),(0,j.jsxs)("button",{className:"p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg shadow hover:shadow-md transition text-left border border-purple-200",children:[(0,j.jsx)("p",{className:"font-bold text-lg",children:"\uD83D\uDC65 Equipa"}),(0,j.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Designar tarefas e performance"})]}),(0,j.jsxs)("button",{className:"p-6 bg-gradient-to-br from-green-50 to-green-100 rounded-lg shadow hover:shadow-md transition text-left border border-green-200",children:[(0,j.jsx)("p",{className:"font-bold text-lg",children:"⚙️ Servi\xe7os"}),(0,j.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Editar pre\xe7os e tipos"})]}),(0,j.jsxs)("button",{className:"p-6 bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg shadow hover:shadow-md transition text-left border border-orange-200",children:[(0,j.jsx)("p",{className:"font-bold text-lg",children:"\uD83D\uDCE7 Automa\xe7\xf5es"}),(0,j.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Gerenciar regras autom\xe1ticas"})]})]})]})};function Admin(){return(0,j.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,j.jsx)(l.Z,{}),(0,j.jsx)("main",{className:"flex-grow max-w-7xl mx-auto w-full px-4 py-8",children:(0,j.jsx)(Dashboard_AdminPanel,{})}),(0,j.jsx)(d.Z,{})]})}},37953:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(30271)}])}},function(e){e.O(0,[216,837,774,336,888,179],function(){return e(e.s=37953)}),_N_E=e.O()}]);