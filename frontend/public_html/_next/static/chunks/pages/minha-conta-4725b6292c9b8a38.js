(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[568],{76723:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return MyAccount}});var l=r(67294),s=r(41664),t=r.n(s),n=r(11163);r(25675);var d=r(85893);function MyAccount(){let e=(0,n.useRouter)(),[a,r]=(0,l.useState)(null),[s,t]=(0,l.useState)(!0),[i,o]=(0,l.useState)(null);(0,l.useEffect)(()=>{checkUserStatus()},[]);let checkUserStatus=async()=>{try{let a=localStorage.getItem("token");if(!a){e.push("/login");return}let l=await fetch("http://localhost:3001/api/auth/profile",{headers:{Authorization:`Bearer ${a}`}});if(l.ok){let e=await l.json();o(e),r("authenticated")}else localStorage.removeItem("token"),e.push("/login")}catch(a){console.error("Erro ao verificar status:",a),e.push("/login")}finally{t(!1)}};return s?(0,d.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):i?"customer"===i.role?(0,d.jsx)(ClientProfile,{user:i}):"staff"===i.role||"professional"===i.role?(0,d.jsx)(ProfessionalProfile,{user:i}):"admin"===i.role?(0,d.jsx)(AdminProfile,{user:i}):null:null}function ClientProfile({user:e}){let[a,r]=(0,l.useState)("info"),[s,t]=(0,l.useState)(!1),[n,i]=(0,l.useState)({name:e.name||"",email:e.email||"",phone:e.phone||"",address:e.address||""}),handleUpdate=async()=>{try{let a=localStorage.getItem("token"),r=await fetch(`http://localhost:3001/api/users/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(n)});r.ok&&(alert("Perfil atualizado com sucesso!"),t(!1))}catch(e){alert("Erro ao atualizar perfil")}};return(0,d.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-green-50 to-emerald-50 dark:from-gray-900 dark:to-gray-950 py-8",children:(0,d.jsx)("div",{className:"container mx-auto px-4",children:(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 mb-8",children:[(0,d.jsxs)("div",{className:"flex items-center gap-6 mb-8",children:[(0,d.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-green-400 to-emerald-600 flex items-center justify-center text-white text-3xl shadow-lg",children:e.name?.charAt(0)||"\uD83D\uDC64"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e.name}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Cliente Premium"}),(0,d.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Membro desde ",new Date(e.createdAt).toLocaleDateString()]})]})]}),(0,d.jsx)("div",{className:"flex gap-4 border-b border-gray-200 dark:border-gray-700 mb-6",children:[{id:"info",label:"Informa\xe7\xf5es",icon:"\uD83D\uDCCB"},{id:"bookings",label:"Meus Agendamentos",icon:"\uD83D\uDCC5"},{id:"payments",label:"Pagamentos",icon:"\uD83D\uDCB3"}].map(e=>(0,d.jsxs)("button",{onClick:()=>r(e.id),className:`px-4 py-2 font-semibold transition-all ${a===e.id?"text-green-600 border-b-2 border-green-600":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[e.icon," ",e.label]},e.id))}),"info"===a&&(0,d.jsx)("div",{children:s?(0,d.jsx)(EditClientForm,{formData:n,setFormData:i,onSave:handleUpdate,onCancel:()=>t(!1)}):(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,d.jsx)(InfoField,{label:"Nome",value:e.name}),(0,d.jsx)(InfoField,{label:"Email",value:e.email}),(0,d.jsx)(InfoField,{label:"Telefone",value:e.phone||"-"}),(0,d.jsx)(InfoField,{label:"Endere\xe7o",value:e.address||"-"})]}),(0,d.jsx)("button",{onClick:()=>t(!0),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:"✏️ Editar Informa\xe7\xf5es"})]})}),"bookings"===a&&(0,d.jsx)(BookingsList,{userId:e.id}),"payments"===a&&(0,d.jsx)(PaymentsList,{userId:e.id})]})})})}function ProfessionalProfile({user:e}){let[a,r]=(0,l.useState)("info"),[s,n]=(0,l.useState)(!1),[i,o]=(0,l.useState)({name:e.name||"",email:e.email||"",phone:e.phone||"",bio:e.bio||"",basePrice:e.basePrice||50,bankAccount:e.bankAccount||"",bankCode:e.bankCode||"",pixKey:e.pixKey||""}),handleUpdate=async()=>{try{let a=localStorage.getItem("token"),r=await fetch(`http://localhost:3001/api/users/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(i)});r.ok&&(alert("Perfil atualizado com sucesso!"),n(!1))}catch(e){alert("Erro ao atualizar perfil")}};return(0,d.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-cyan-50 dark:from-gray-900 dark:to-gray-950 py-8",children:(0,d.jsx)("div",{className:"container mx-auto px-4",children:(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 mb-8",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,d.jsxs)("div",{className:"flex items-center gap-6",children:[(0,d.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-blue-400 to-cyan-600 flex items-center justify-center text-white text-3xl shadow-lg",children:"\uD83D\uDC69‍\uD83D\uDCBC"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e.name}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Profissional de Limpeza"}),(0,d.jsx)("div",{className:"flex gap-4 mt-2",children:(0,d.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold",children:"⭐ 4.8 (120 avalia\xe7\xf5es)"})})]})]}),(0,d.jsx)(t(),{href:"/staff/booking-requests",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"\uD83D\uDCC5 Ver Solicita\xe7\xf5es"})]}),(0,d.jsx)("div",{className:"flex gap-4 border-b border-gray-200 dark:border-gray-700 mb-6 overflow-x-auto",children:[{id:"info",label:"Informa\xe7\xf5es",icon:"\uD83D\uDCCB"},{id:"pricing",label:"Tabela de Pre\xe7os",icon:"\uD83D\uDCB0"},{id:"agenda",label:"Minha Agenda",icon:"\uD83D\uDCC5"},{id:"earnings",label:"Ganhos",icon:"\uD83D\uDCB5"}].map(e=>(0,d.jsxs)("button",{onClick:()=>r(e.id),className:`px-4 py-2 font-semibold transition-all whitespace-nowrap ${a===e.id?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[e.icon," ",e.label]},e.id))}),"info"===a&&(0,d.jsxs)("div",{children:[s?(0,d.jsx)(EditProfessionalForm,{formData:i,setFormData:o,onSave:handleUpdate,onCancel:()=>n(!1)}):(0,d.jsx)(InfoProfessionalViewer,{user:e,formData:i}),!s&&(0,d.jsx)("button",{onClick:()=>n(!0),className:"mt-6 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"✏️ Editar Informa\xe7\xf5es"})]}),"pricing"===a&&(0,d.jsx)(PricingTable,{servicePrice:i.basePrice}),"agenda"===a&&(0,d.jsx)(ProfessionalSchedule,{staffId:e.id}),"earnings"===a&&(0,d.jsx)(EarningsDashboard,{staffId:e.id})]})})})}function InfoField({label:e,value:a}){return(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:e}),(0,d.jsx)("p",{className:"text-gray-900 dark:text-white mt-1",children:a})]})}function EditClientForm({formData:e,setFormData:a,onSave:r,onCancel:l}){return(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("input",{type:"text",placeholder:"Nome",value:e.name,onChange:r=>a({...e,name:r.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),(0,d.jsx)("input",{type:"email",placeholder:"Email",value:e.email,onChange:r=>a({...e,email:r.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),(0,d.jsx)("input",{type:"tel",placeholder:"Telefone",value:e.phone,onChange:r=>a({...e,phone:r.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),(0,d.jsx)("input",{type:"text",placeholder:"Endere\xe7o",value:e.address,onChange:r=>a({...e,address:r.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),(0,d.jsxs)("div",{className:"flex gap-4",children:[(0,d.jsx)("button",{onClick:r,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"\uD83D\uDCBE Salvar"}),(0,d.jsx)("button",{onClick:l,className:"px-6 py-2 border rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:"❌ Cancelar"})]})]})}function EditProfessionalForm({formData:e,setFormData:a,onSave:r,onCancel:l}){return(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("input",{type:"text",placeholder:"Nome",value:e.name,onChange:r=>a({...e,name:r.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"}),(0,d.jsx)("textarea",{placeholder:"Bio/Descri\xe7\xe3o",value:e.bio,onChange:r=>a({...e,bio:r.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",rows:"3"}),(0,d.jsx)("input",{type:"number",placeholder:"Pre\xe7o Base (R$)",value:e.basePrice,onChange:r=>a({...e,basePrice:parseFloat(r.target.value)}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",step:"0.01"}),(0,d.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-700",children:[(0,d.jsx)("h3",{className:"font-semibold mb-3 text-yellow-900 dark:text-yellow-200",children:"\uD83D\uDCB0 Dados para Recebimento"}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold",children:"Chave PIX"}),(0,d.jsx)("input",{type:"text",placeholder:"Seu PIX (email, telefone, CPF ou chave aleat\xf3ria)",value:e.pixKey,onChange:r=>a({...e,pixKey:r.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 mt-1"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold",children:"Banco"}),(0,d.jsx)("input",{type:"text",placeholder:"C\xf3digo do banco",value:e.bankCode,onChange:r=>a({...e,bankCode:r.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 mt-1"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-sm font-semibold",children:"Conta"}),(0,d.jsx)("input",{type:"text",placeholder:"N\xfamero da conta",value:e.bankAccount,onChange:r=>a({...e,bankAccount:r.target.value}),className:"w-full px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 mt-1"})]})]})]})]}),(0,d.jsxs)("div",{className:"flex gap-4",children:[(0,d.jsx)("button",{onClick:r,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"\uD83D\uDCBE Salvar"}),(0,d.jsx)("button",{onClick:l,className:"px-6 py-2 border rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:"❌ Cancelar"})]})]})}function InfoProfessionalViewer({user:e,formData:a}){return(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsx)(InfoField,{label:"Nome",value:a.name}),(0,d.jsx)(InfoField,{label:"Email",value:e.email}),(0,d.jsx)(InfoField,{label:"Bio",value:a.bio||"-"}),(0,d.jsx)(InfoField,{label:"Pre\xe7o Base",value:`R$ ${a.basePrice?.toFixed(2)||"0.00"}`}),(0,d.jsx)(InfoField,{label:"Chave PIX",value:a.pixKey||"-"}),(0,d.jsx)(InfoField,{label:"Banco",value:a.bankCode||"-"})]})}function PricingTable({servicePrice:e=50}){return(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"w-full",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{className:"bg-blue-50 dark:bg-blue-900/30",children:[(0,d.jsx)("th",{className:"px-4 py-3 text-left font-semibold",children:"Servi\xe7o"}),(0,d.jsx)("th",{className:"px-4 py-3 text-center font-semibold",children:"Dura\xe7\xe3o"}),(0,d.jsx)("th",{className:"px-4 py-3 text-right font-semibold",children:"Pre\xe7o"}),(0,d.jsx)("th",{className:"px-4 py-3 text-center font-semibold",children:"Status"})]})}),(0,d.jsx)("tbody",{children:[{name:"Limpeza B\xe1sica (1h)",hours:1,multiplier:1},{name:"Limpeza Padr\xe3o (2h)",hours:2,multiplier:1},{name:"Limpeza Profunda (3h)",hours:3,multiplier:1.2},{name:"Organiza\xe7\xe3o (2h)",hours:2,multiplier:1.3},{name:"Limpeza P\xf3s-Reforma (4h)",hours:4,multiplier:1.5}].map((a,r)=>{let l=e*a.hours*a.multiplier;return(0,d.jsxs)("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,d.jsx)("td",{className:"px-4 py-3",children:a.name}),(0,d.jsxs)("td",{className:"px-4 py-3 text-center",children:[a.hours," hora",a.hours>1?"s":""]}),(0,d.jsxs)("td",{className:"px-4 py-3 text-right font-semibold text-green-600",children:["R$ ",l.toFixed(2)]}),(0,d.jsx)("td",{className:"px-4 py-3 text-center",children:(0,d.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Ativo"})})]},r)})})]})})}function ProfessionalSchedule({staffId:e}){let a=["SEG","TER","QUA","QUI","SEX","S\xc1B","DOM"],[r,s]=(0,l.useState)({});return(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCC5 Minha Disponibilidade"}),(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"w-full text-sm",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{className:"bg-blue-50 dark:bg-blue-900/30",children:[(0,d.jsx)("th",{className:"px-2 py-2",children:"Hor\xe1rio"}),a.map(e=>(0,d.jsx)("th",{className:"px-2 py-2",children:e},e))]})}),(0,d.jsx)("tbody",{children:["08:00","09:00","10:00","11:00","14:00","15:00","16:00","17:00"].map(e=>(0,d.jsxs)("tr",{className:"border-b dark:border-gray-700",children:[(0,d.jsx)("td",{className:"px-2 py-2 font-semibold",children:e}),a.map(a=>(0,d.jsx)("td",{className:"px-2 py-2 text-center",children:(0,d.jsx)("button",{className:"w-8 h-8 rounded bg-green-100 hover:bg-green-200 text-green-700 font-semibold transition",title:`${a} \xe0s ${e}`,children:"✓"})},`${a}-${e}`))]},e))})]})})]})}function EarningsDashboard({staffId:e}){return(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,d.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200",children:[(0,d.jsx)("p",{className:"text-sm text-green-800 dark:text-green-300",children:"Este M\xeas"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-green-600",children:"R$ 2.450,00"})]}),(0,d.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200",children:[(0,d.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Acumulado"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:"R$ 12.890,00"})]}),(0,d.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200",children:[(0,d.jsx)("p",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Agendamentos"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:"47"})]})]})})}function AdminProfile({user:e}){return(0,d.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-red-50 to-yellow-50 dark:from-gray-900 dark:to-gray-950 py-8",children:(0,d.jsx)("div",{className:"container mx-auto px-4",children:(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8",children:[(0,d.jsxs)("div",{className:"flex items-center gap-6 mb-8",children:[(0,d.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-red-400 to-yellow-600 flex items-center justify-center text-white text-3xl shadow-lg",children:"\uD83D\uDC68‍\uD83D\uDCBC"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e.name}),(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Administrador"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,d.jsx)(AdminCard,{title:"Usu\xe1rios",value:"247",icon:"\uD83D\uDC65"}),(0,d.jsx)(AdminCard,{title:"Agendamentos",value:"1,234",icon:"\uD83D\uDCC5"}),(0,d.jsx)(AdminCard,{title:"Profissionais",value:"48",icon:"\uD83D\uDC69‍\uD83D\uDCBC"}),(0,d.jsx)(AdminCard,{title:"Receita",value:"R$ 45.2k",icon:"\uD83D\uDCB0"})]}),(0,d.jsx)("div",{className:"mt-8",children:(0,d.jsx)(t(),{href:"/admin-dashboard",className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"\uD83D\uDEE0️ Painel Admin"})})]})})})}function AdminCard({title:e,value:a,icon:r}){return(0,d.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,d.jsx)("div",{className:"text-3xl mb-2",children:r}),(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e}),(0,d.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a})]})}function BookingsList({userId:e}){return(0,d.jsx)("div",{children:(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Seus agendamentos aparecer\xe3o aqui"})})}function PaymentsList({userId:e}){return(0,d.jsx)("div",{children:(0,d.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Seu hist\xf3rico de pagamentos aparecer\xe1 aqui"})})}},98069:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/minha-conta",function(){return r(76723)}])}},function(e){e.O(0,[774,336,216,888,179],function(){return e(e.s=98069)}),_N_E=e.O()}]);