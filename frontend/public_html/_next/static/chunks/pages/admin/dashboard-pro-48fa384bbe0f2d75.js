(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[896],{33979:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return AdminDashboard}});var a=t(67294),l=t(9008),r=t.n(l),n=t(41664),o=t.n(n),i=t(46011),d=t(90835),c=t(85893);function AdminDashboard(){let[e,s]=(0,a.useState)({totalBookings:0,totalRevenue:0,totalHoursSold:0,pendingBookings:0}),[t,l]=(0,a.useState)([]),[n,x]=(0,a.useState)(!0),[m,h]=(0,a.useState)("overview");(0,a.useEffect)(()=>{fetchDashboardData()},[]);let fetchDashboardData=async()=>{try{let e=localStorage.getItem("token"),t=await fetch("/api/admin/dashboard",{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();a.success&&s(a.stats);let r=await fetch("/api/admin/bookings?limit=10",{headers:{Authorization:`Bearer ${e}`}}),n=await r.json();n.success&&l(n.bookings),x(!1)}catch(e){console.error("Erro ao carregar dashboard:",e),x(!1)}},updateBookingStatus=async(e,s)=>{try{let t=localStorage.getItem("token"),a=await fetch(`/api/admin/bookings/${e}/status`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({status:s})});a.ok&&fetchDashboardData()}catch(e){console.error("Erro ao atualizar status:",e)}};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(r(),{children:[(0,c.jsx)("title",{children:"Admin Dashboard - Leidy Cleaner"}),(0,c.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]}),(0,c.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,c.jsx)(i.Z,{}),(0,c.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"\uD83D\uDCCA Painel Administrativo"}),(0,c.jsx)("p",{className:"text-gray-400",children:"Gerencie bookings, receita e clientes"})]}),!n&&(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,c.jsx)(StatCard,{icon:"\uD83D\uDCC5",title:"Total de Bookings",value:e.totalBookings,trend:"+12% vs m\xeas anterior"}),(0,c.jsx)(StatCard,{icon:"\uD83D\uDCB0",title:"Receita Total",value:`R$ ${parseFloat(e.totalRevenue).toLocaleString("pt-BR")}`,trend:"+8% vs m\xeas anterior"}),(0,c.jsx)(StatCard,{icon:"\uD83D\uDCB3",title:"Vendas Realizadas",value:`${e.totalHoursSold||0}`,trend:"+15% vs m\xeas anterior"}),(0,c.jsx)(StatCard,{icon:"⏳",title:"Bookings Pendentes",value:e.pendingBookings,trend:"Atender hoje",variant:"warning"})]}),(0,c.jsx)("div",{className:"mb-6 border-b border-gray-700",children:(0,c.jsx)("div",{className:"flex gap-4",children:["overview","bookings","revenue","hours"].map(e=>(0,c.jsxs)("button",{onClick:()=>h(e),className:`px-4 py-2 font-semibold capitalize transition ${m===e?"border-b-2 border-green-500 text-green-400":"text-gray-400 hover:text-white"}`,children:["overview"===e&&"\uD83D\uDCCB Overview","bookings"===e&&"\uD83D\uDCC5 Bookings","revenue"===e&&"\uD83D\uDCB0 Faturamento","hours"===e&&"\uD83D\uDCB3 Pagamentos"]},e))})}),"overview"===m&&(0,c.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,c.jsxs)("div",{className:"lg:col-span-2 bg-gray-800 rounded-lg p-6",children:[(0,c.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\uD83D\uDCC5 Bookings Recentes"}),(0,c.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:t.map(e=>(0,c.jsxs)("div",{className:"bg-gray-700 p-4 rounded flex justify-between items-center",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-semibold",children:e.address}),(0,c.jsxs)("p",{className:"text-sm text-gray-400",children:["\uD83D\uDCC5 ",new Date(e.date).toLocaleDateString("pt-BR")," • ⏰ ",e.time]})]}),(0,c.jsxs)("div",{className:"text-right",children:[(0,c.jsxs)("p",{className:"font-bold text-green-400",children:["R$ ",e.total_price]}),(0,c.jsx)("span",{className:`px-2 py-1 rounded text-xs font-semibold ${"completed"===e.status?"bg-green-900 text-green-300":"confirmed"===e.status?"bg-blue-900 text-blue-300":"bg-yellow-900 text-yellow-300"}`,children:e.status})]})]},e.id))})]}),(0,c.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,c.jsx)("h2",{className:"text-xl font-bold mb-4",children:"⚡ A\xe7\xf5es R\xe1pidas"}),(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsx)("button",{className:"w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded font-semibold transition",children:"➕ Novo Booking"}),(0,c.jsx)("button",{className:"w-full bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded font-semibold transition",children:"\uD83D\uDC65 Adicionar Cliente"}),(0,c.jsx)("button",{className:"w-full bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded font-semibold transition",children:"\uD83D\uDCCA Gerar Relat\xf3rio"})]})]})]}),"bookings"===m&&(0,c.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,c.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\uD83D\uDCC5 Gerenciar Bookings"}),(0,c.jsx)("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"w-full text-sm",children:[(0,c.jsx)("thead",{className:"bg-gray-700",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-4 py-2 text-left",children:"ID"}),(0,c.jsx)("th",{className:"px-4 py-2 text-left",children:"Endere\xe7o"}),(0,c.jsx)("th",{className:"px-4 py-2 text-left",children:"Data"}),(0,c.jsx)("th",{className:"px-4 py-2 text-left",children:"Dura\xe7\xe3o"}),(0,c.jsx)("th",{className:"px-4 py-2 text-left",children:"Valor"}),(0,c.jsx)("th",{className:"px-4 py-2 text-left",children:"Status"}),(0,c.jsx)("th",{className:"px-4 py-2 text-center",children:"A\xe7\xf5es"})]})}),(0,c.jsx)("tbody",{children:t.map(e=>(0,c.jsxs)("tr",{className:"border-t border-gray-700 hover:bg-gray-700",children:[(0,c.jsxs)("td",{className:"px-4 py-2",children:["# ",e.id]}),(0,c.jsx)("td",{className:"px-4 py-2",children:e.address}),(0,c.jsx)("td",{className:"px-4 py-2",children:new Date(e.date).toLocaleDateString("pt-BR")}),(0,c.jsxs)("td",{className:"px-4 py-2",children:[e.duration_hours,"h"]}),(0,c.jsxs)("td",{className:"px-4 py-2 font-semibold",children:["R$ ",e.total_price]}),(0,c.jsx)("td",{className:"px-4 py-2",children:(0,c.jsxs)("select",{value:e.status,onChange:s=>updateBookingStatus(e.id,s.target.value),className:"bg-gray-600 rounded px-2 py-1 text-xs",children:[(0,c.jsx)("option",{value:"pending",children:"Pendente"}),(0,c.jsx)("option",{value:"confirmed",children:"Confirmado"}),(0,c.jsx)("option",{value:"completed",children:"Completo"}),(0,c.jsx)("option",{value:"cancelled",children:"Cancelado"})]})}),(0,c.jsx)("td",{className:"px-4 py-2 text-center",children:(0,c.jsx)(o(),{href:`/admin/bookings/${e.id}`,className:"text-blue-400 hover:text-blue-300",children:"Ver →"})})]},e.id))})]})})]}),"revenue"===m&&(0,c.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,c.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\uD83D\uDCB0 Faturamento"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,c.jsxs)("div",{className:"bg-gray-700 p-4 rounded",children:[(0,c.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Receita Total"}),(0,c.jsxs)("p",{className:"text-2xl font-bold text-green-400",children:["R$ ",parseFloat(e.totalRevenue).toLocaleString("pt-BR")]})]}),(0,c.jsxs)("div",{className:"bg-gray-700 p-4 rounded",children:[(0,c.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Transa\xe7\xf5es"}),(0,c.jsx)("p",{className:"text-2xl font-bold",children:e.totalBookings})]}),(0,c.jsxs)("div",{className:"bg-gray-700 p-4 rounded",children:[(0,c.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Ticket M\xe9dio"}),(0,c.jsxs)("p",{className:"text-2xl font-bold text-blue-400",children:["R$ ",e.totalBookings>0?(parseFloat(e.totalRevenue)/e.totalBookings).toFixed(2):"0"]})]})]}),(0,c.jsx)("p",{className:"text-gray-400",children:"Gr\xe1ficos de faturamento em breve..."})]}),"hours"===m&&(0,c.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,c.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\uD83D\uDCB3 Relat\xf3rio de Pagamentos"}),(0,c.jsx)("p",{className:"text-gray-400 mb-4",children:"Resumo de pagamentos recebidos via checkout"}),(0,c.jsx)("div",{className:"space-y-3",children:(0,c.jsx)("p",{className:"text-sm text-gray-400",children:"Nenhum dado detalhado dispon\xedvel no modo demo."})})]})]})]}),(0,c.jsx)(d.Z,{})]})}function StatCard({icon:e,title:s,value:t,trend:a,variant:l="default"}){return(0,c.jsxs)("div",{className:`rounded-lg p-6 ${"warning"===l?"bg-yellow-900/20 border border-yellow-700":"bg-gray-800"}`,children:[(0,c.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,c.jsx)("h3",{className:"text-gray-400 text-sm",children:s}),(0,c.jsx)("span",{className:"text-3xl",children:e})]}),(0,c.jsx)("p",{className:"text-3xl font-bold mb-2",children:t}),(0,c.jsx)("p",{className:`text-xs ${"warning"===l?"text-yellow-400":"text-green-400"}`,children:a})]})}},73582:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard-pro",function(){return t(33979)}])}},function(e){e.O(0,[216,837,774,336,888,179],function(){return e(e.s=73582)}),_N_E=e.O()}]);