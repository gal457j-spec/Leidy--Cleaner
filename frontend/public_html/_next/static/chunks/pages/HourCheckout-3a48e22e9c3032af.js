(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[267],{59061:function(e,t,a){"use strict";a.r(t);var l=a(67294),s=a(85893);t.default=()=>{let[e,t]=(0,l.useState)(""),[a,n]=(0,l.useState)(""),[r,o]=(0,l.useState)(""),[i,c]=(0,l.useState)(null),[d,u]=(0,l.useState)(!1),m={WELCOME10:.1,FREX:.15},handleCheckout=async()=>{if(!e)return alert("Informe o bookingId");let t=null!==i?i:Number(a);if(!t||Number.isNaN(t)||t<=0)return alert("Informe um valor v\xe1lido");try{u(!0);let a=localStorage.getItem("accessToken"),l=await fetch("/api/payments/create-checkout",{method:"POST",headers:{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`}},body:JSON.stringify({bookingId:e,amount:t})}),s=await l.json();if(!l.ok||!s.success)throw Error(s.error||"Erro ao iniciar checkout");s.sessionUrl?window.open(s.sessionUrl,"_blank"):alert("Sess\xe3o iniciada. ID: "+s.sessionId)}catch(e){console.error(e),alert("Erro: "+e.message)}finally{u(!1)}};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-indigo-100 py-12 px-4",children:(0,s.jsxs)("div",{className:"container mx-auto max-w-3xl",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-indigo-900 mb-2",children:"\uD83D\uDCB3 Pagar Faxinha"}),(0,s.jsx)("p",{className:"text-gray-700",children:"Insira o ID do agendamento e o valor — opcional: cupom de desconto."})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Booking ID"}),(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"mt-2 w-full p-3 border rounded",placeholder:"ex: 12345"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Valor (R$)"}),(0,s.jsx)("input",{type:"number",value:a,onChange:e=>n(e.target.value),className:"mt-2 w-full p-3 border rounded",placeholder:"ex: 79.90"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cupom (opcional)"}),(0,s.jsx)("input",{type:"text",value:r,onChange:e=>o(e.target.value),className:"mt-2 w-full p-3 border rounded",placeholder:"WELCOME10"})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)("button",{onClick:()=>{let e=Number(a);if(!e||e<=0)return alert("Insira um valor v\xe1lido");let t=m[r?.toUpperCase()]||0,l=+(e*(1-t)).toFixed(2);c(l)},className:"btn btn-primary w-full",children:"Aplicar Cupom"})})]}),(0,s.jsxs)("div",{className:"mt-6 border-t pt-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total:"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-indigo-700",children:["R$ ",null!==i?i.toFixed(2):a?Number(a).toFixed(2):"0.00"]}),(0,s.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,s.jsx)("button",{disabled:d,onClick:handleCheckout,className:"btn btn-cta-glow w-full",children:d?"⏳ Iniciando...":"→ Pagar Agora"}),(0,s.jsx)("button",{onClick:()=>{t(""),n(""),o(""),c(null)},className:"btn btn-outline w-full",children:"Limpar"})]})]})]})]})})}},62250:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/HourCheckout",function(){return a(59061)}])}},function(e){e.O(0,[774,336,216,888,179],function(){return e(e.s=62250)}),_N_E=e.O()}]);