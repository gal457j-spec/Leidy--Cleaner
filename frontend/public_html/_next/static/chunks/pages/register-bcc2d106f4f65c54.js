(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{97343:function(e,a,r){"use strict";r.d(a,{Zn:function(){return MainLayout}});var t=r(46011),s=r(90835),n=r(85893);let MainLayout=({children:e,showHeader:a=!0,showFooter:r=!0})=>(0,n.jsxs)("div",{className:"flex flex-col min-h-screen bg-white",children:[a&&(0,n.jsx)(t.Z,{}),(0,n.jsx)("main",{className:"flex-grow",children:e}),r&&(0,n.jsx)(s.Z,{})]})},60508:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return Register}});var t=r(67294),s=r(9008),n=r.n(s),o=r(41664),d=r.n(o),l=r(11163),i=r(87066),c=r(71677),m=r(86501),x=r(97343),p=r(85893);function Register(){let e=(0,l.useRouter)(),[a,r]=(0,t.useState)(!1),[s,o]=(0,t.useState)({name:"",email:"",phone:"",cpf:"",photo:null,photoPreview:null,password:"",role:"cliente",confirmPassword:"",acceptTerms:!1}),[h,g]=(0,t.useState)({}),validateForm=()=>{let e={};return s.name.trim()||(e.name="Nome \xe9 obrigat\xf3rio"),s.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(e.email="Email inv\xe1lido"):e.email="Email \xe9 obrigat\xf3rio",s.phone||(e.phone="Telefone \xe9 obrigat\xf3rio"),s.cpf?/^\d{3}\.\d{3}\.\d{3}-\d{2}$/.test(s.cpf)||/^\d{11}$/.test(s.cpf)||(e.cpf="CPF inv\xe1lido (formatos: 000.000.000-00 ou 00000000000)"):e.cpf="CPF \xe9 obrigat\xf3rio",s.photo||(e.photo="Foto de perfil \xe9 obrigat\xf3ria"),s.password?s.password.length<8&&(e.password="Senha deve ter no m\xednimo 8 caracteres"):e.password="Senha \xe9 obrigat\xf3ria",s.password!==s.confirmPassword&&(e.confirmPassword="As senhas n\xe3o correspondem"),s.acceptTerms||(e.acceptTerms="Voc\xea deve aceitar os termos"),g(e),0===Object.keys(e).length},handleChange=e=>{let{name:a,value:r,type:t,checked:s}=e.target;if("file"===t){let a=e.target.files[0];if(a){let e=new FileReader;e.onload=e=>{o(r=>({...r,photo:a,photoPreview:e.target.result}))},e.readAsDataURL(a)}}else o(e=>({...e,[a]:"checkbox"===t?s:r}));h[a]&&g(e=>({...e,[a]:""}))},handleRegister=async a=>{if(a.preventDefault(),validateForm()){r(!0);try{let a=new FormData;a.append("name",s.name),a.append("email",s.email),a.append("phone",s.phone),a.append("cpf",s.cpf),a.append("password",s.password),a.append("role",s.role),s.photo&&a.append("photo",s.photo);let{data:r}=await i.Z.post("/api/auth/register",a,{headers:{"Content-Type":"multipart/form-data"}});localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.user)),m.ZP.success("Conta criada com sucesso!"),e.push("/dashboard")}catch(e){m.ZP.error(e.response?.data?.message||"Erro ao criar conta"),e.response?.data?.errors&&g(e.response.data.errors)}finally{r(!1)}}};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(n(),{children:[(0,p.jsx)("title",{children:"Criar Conta - Leidy Cleaner"}),(0,p.jsx)("meta",{name:"description",content:"Crie sua conta Leidy Cleaner e comece a agendar servi\xe7os de limpeza"})]}),(0,p.jsx)(x.Zn,{children:(0,p.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 dark:from-primary-900 dark:to-primary-800 py-16",children:(0,p.jsx)("div",{className:"w-full max-w-xl px-6",children:(0,p.jsxs)(c.E.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"bg-white dark:bg-primary-800 rounded-2xl shadow-2xl p-8",children:[(0,p.jsx)("h1",{className:"text-3xl font-black text-center mb-2 text-gray-900 dark:text-white",children:"Criar Conta"}),(0,p.jsx)("p",{className:"text-center text-gray-600 dark:text-gray-300 mb-8",children:"Junte-se \xe0 Leidy Cleaner e aproveite nossos servi\xe7os premium"}),(0,p.jsxs)("form",{onSubmit:handleRegister,className:"space-y-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nome Completo"}),(0,p.jsx)("input",{name:"name",value:s.name,onChange:handleChange,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 dark:border-primary-700 dark:bg-primary-900 dark:text-white"}),h.name&&(0,p.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.name})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),(0,p.jsx)("input",{name:"email",type:"email",value:s.email,onChange:handleChange,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 dark:border-primary-700 dark:bg-primary-900 dark:text-white"}),h.email&&(0,p.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.email})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Telefone"}),(0,p.jsx)("input",{name:"phone",value:s.phone,onChange:handleChange,placeholder:"(11) 99999-9999",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 dark:border-primary-700 dark:bg-primary-900 dark:text-white"}),h.phone&&(0,p.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.phone})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CPF"}),(0,p.jsx)("input",{name:"cpf",value:s.cpf,onChange:handleChange,placeholder:"000.000.000-00",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 dark:border-primary-700 dark:bg-primary-900 dark:text-white"}),h.cpf&&(0,p.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.cpf})]})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Senha"}),(0,p.jsx)("input",{name:"password",type:"password",value:s.password,onChange:handleChange,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 dark:border-primary-700 dark:bg-primary-900 dark:text-white"}),h.password&&(0,p.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.password})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirmar Senha"}),(0,p.jsx)("input",{name:"confirmPassword",type:"password",value:s.confirmPassword,onChange:handleChange,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 dark:border-primary-700 dark:bg-primary-900 dark:text-white"}),h.confirmPassword&&(0,p.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.confirmPassword})]})]}),(0,p.jsxs)("div",{className:"border-2 border-dashed border-gray-300 dark:border-primary-700 rounded-lg p-6 text-center",children:[(0,p.jsx)("input",{type:"file",name:"photo",accept:"image/*",onChange:handleChange,className:"hidden",id:"photoInput"}),(0,p.jsx)("label",{htmlFor:"photoInput",className:"cursor-pointer block",children:s.photoPreview?(0,p.jsxs)("div",{children:[(0,p.jsx)("img",{src:s.photoPreview,alt:"Preview",className:"w-24 h-24 rounded-full mx-auto mb-2 object-cover"}),(0,p.jsx)("p",{className:"text-sm text-green-600 font-semibold",children:"âœ“ Foto selecionada"}),(0,p.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Clique para alterar"})]}):(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-2xl mb-2",children:"\uD83D\uDCF8"}),(0,p.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Selecione sua foto de perfil"}),(0,p.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG at\xe9 5MB"})]})}),h.photo&&(0,p.jsx)("p",{className:"text-red-500 text-sm mt-2",children:h.photo})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Conta"}),(0,p.jsxs)("select",{name:"role",value:s.role,onChange:handleChange,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 dark:border-primary-700 dark:bg-primary-900 dark:text-white",children:[(0,p.jsx)("option",{value:"cliente",children:"Cliente"}),(0,p.jsx)("option",{value:"funcionario",children:"Funcion\xe1rio"}),(0,p.jsx)("option",{value:"adm",children:"Administrador"})]})]}),(0,p.jsxs)("div",{className:"flex items-start gap-3",children:[(0,p.jsx)("input",{type:"checkbox",name:"acceptTerms",checked:s.acceptTerms,onChange:handleChange,className:"mt-1 w-4 h-4 rounded border-gray-300 text-secondary-600 focus:ring-secondary-500"}),(0,p.jsxs)("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Concordo com os ",(0,p.jsx)(d(),{href:"/terms",className:"text-secondary-600",children:"Termos"})," e ",(0,p.jsx)(d(),{href:"/privacy",className:"text-secondary-600",children:"Pol\xedtica"})]})]}),(0,p.jsx)("button",{type:"submit",disabled:a,className:"btn-primary w-full py-3",children:a?"Criando conta...":"Criar Conta"})]}),(0,p.jsx)("div",{className:"mt-6 text-center",children:(0,p.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["J\xe1 tem conta? ",(0,p.jsx)(d(),{href:"/login",className:"text-secondary-600",children:"Entrar"})]})})]})})})})]})}},10922:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return r(60508)}])}},function(e){e.O(0,[216,837,774,336,888,179],function(){return e(e.s=10922)}),_N_E=e.O()}]);