(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[988],{25698:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return Agendar}});var s=t(67294),r=t(41664),l=t.n(r),d=t(9008),n=t.n(d),i=t(71677),o=t(11988);t(35890);var c=t(89871),x=t(57097),m=t(85893);function RecurringScheduler(){let[e,a]=(0,s.useState)([]),[t,r]=(0,s.useState)(!1),{addNotification:l}=(0,x.z)();(0,s.useEffect)(()=>{let e=localStorage.getItem("decoded");if(e){let t=JSON.parse(e);a(t),setupReminders(t)}},[]);let setupReminders=e=>{e.forEach(e=>{if(e.reminders){let a=new Date(e.nextDate);if(a.setHours(a.getHours()-e.reminderHours),a>new Date){let t=setTimeout(()=>{l({title:"\uD83D\uDD14 Lembrete de Servi\xe7o",message:`${e.title} est\xe1 agendado para amanh\xe3 \xe0s ${e.time}`,icon:"⏰",tag:"reminder"})},a-new Date);e.timeoutId=t}}})},calculateNextDate=e=>{let a=new Date(e.startDate),t=new Date;if(a<t){let s=Math.ceil((t-a)/864e5),r=new Date(a);switch(e.frequency){case"daily":r.setDate(a.getDate()+Math.ceil(s));break;case"weekly":r.setDate(a.getDate()+7*Math.ceil(s/7));break;case"biweekly":r.setDate(a.getDate()+14*Math.ceil(s/14));break;case"monthly":r.setMonth(a.getMonth()+Math.ceil(s/30));break;default:r=a}return r}return a};return(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"\uD83D\uDD04 Servi\xe7os Recorrentes"}),(0,m.jsxs)("button",{onClick:()=>r(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,m.jsx)(c.Z,{className:"w-4 h-4"}),"Agendar Recorrente"]})]}),(0,m.jsx)("decoded",{services:e,onRemove:t=>{let s=e.find(e=>e.id===t);s?.timeoutId&&clearTimeout(s.timeoutId);let r=e.filter(e=>e.id!==t);a(r),localStorage.setItem("decoded",JSON.stringify(r))}}),t&&(0,m.jsx)(SchedulerModal,{onClose:()=>r(!1),onSchedule:t=>{let s={id:Date.now(),...t,createdAt:new Date,nextDate:calculateNextDate(t)},r=[...e,s];a(r),localStorage.setItem("decoded",JSON.stringify(r)),setupReminders([s]),l({title:"✅ Servi\xe7o Recorrente Agendado",message:`${t.title} ser\xe1 executado ${t.frequency}`,icon:"\uD83D\uDCC5",tag:"schedule"})}})]})}function SchedulerModal({onClose:e,onSchedule:a}){let[t,r]=(0,s.useState)({title:"",frequency:"weekly",startDate:new Date,time:"09:00",reminders:!0,reminderHours:24});return(0,m.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)(i.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-xl max-w-md w-full p-6",children:[(0,m.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Agendar Servi\xe7o Recorrente"}),(0,m.jsxs)("form",{onSubmit:s=>{s.preventDefault(),a(t),e()},className:"space-y-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Servi\xe7o"}),(0,m.jsx)("input",{type:"text",value:t.title,onChange:e=>r({...t,title:e.target.value}),placeholder:"Ex: Limpeza residencial completa",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frequ\xeancia"}),(0,m.jsx)("select",{value:t.frequency,onChange:e=>r({...t,frequency:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[{value:"daily",label:"Diariamente"},{value:"weekly",label:"Semanalmente"},{value:"biweekly",label:"A cada 2 semanas"},{value:"monthly",label:"Mensalmente"}].map(e=>(0,m.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Inicial"}),(0,m.jsx)(o.ZP,{selected:t.startDate,onChange:e=>r({...t,startDate:e}),dateFormat:"dd/MM/yyyy",minDate:new Date,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hor\xe1rio"}),(0,m.jsx)("input",{type:"time",value:t.time,onChange:e=>r({...t,time:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("input",{type:"checkbox",id:"reminders",checked:t.reminders,onChange:e=>r({...t,reminders:e.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,m.jsx)("label",{htmlFor:"reminders",className:"ml-2 text-sm text-gray-700",children:"Ativar lembretes"})]}),t.reminders&&(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lembrar quantas horas antes?"}),(0,m.jsxs)("select",{value:t.reminderHours,onChange:e=>r({...t,reminderHours:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,m.jsx)("option",{value:1,children:"1 hora antes"}),(0,m.jsx)("option",{value:2,children:"2 horas antes"}),(0,m.jsx)("option",{value:6,children:"6 horas antes"}),(0,m.jsx)("option",{value:12,children:"12 horas antes"}),(0,m.jsx)("option",{value:24,children:"1 dia antes"}),(0,m.jsx)("option",{value:48,children:"2 dias antes"})]})]})]}),(0,m.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,m.jsx)("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,m.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Agendar"})]})]})]})})}var u=t(38810),components_AvailableStaffWidget=({date:e,time:a,serviceId:t,onSelectStaff:r,autoScroll:l=!0})=>{let[d,n]=(0,s.useState)([]),[i,o]=(0,s.useState)(!0),[c,x]=(0,s.useState)(null),[g,h]=(0,s.useState)(null),[b,p]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(!e||!a||!t){o(!1);return}let fetchAvailableStaff=async()=>{try{o(!0);let s=new URLSearchParams({date:e,time:a,serviceId:t,duration:2}),l=await (0,u.k_)(`/api/staff/available?${s.toString()}`,{method:"GET"});if(n(l.data||[]),x(null),l.data?.length>0&&!g){let e=l.data[0];h(e.id),r?.(e)}}catch(e){x(e.message)}finally{o(!1)}},s=setTimeout(fetchAvailableStaff,300);return()=>clearTimeout(s)},[e,a,t]),(0,s.useEffect)(()=>{if(l&&d.length>0){let e=document.getElementById(`staff-${d[0]?.id}`);e?.scrollIntoView({behavior:"smooth",block:"nearest"})}},[d,l]);let getLoadStatusColor=e=>{switch(e){case"available":return"#10b981";case"light":return"#f59e0b";case"medium":return"#f97316";case"heavy":return"#ef4444";default:return"#6b7280"}},getLoadStatusLabel=e=>{switch(e){case"available":return"Dispon\xedvel";case"light":return"1-2 agendamentos";case"medium":return"3-4 agendamentos";case"heavy":return"Lotada";default:return"Unknown"}},handleSelectStaff=e=>{h(e.id),r?.(e)};return i?(0,m.jsx)("div",{className:styles.container,children:(0,m.jsxs)("div",{className:styles.loading,children:[(0,m.jsx)("div",{className:styles.spinner}),(0,m.jsx)("p",{children:"Carregando profissionais dispon\xedveis..."})]})}):c?(0,m.jsx)("div",{className:styles.container,children:(0,m.jsxs)("div",{className:styles.error,children:[(0,m.jsx)("span",{children:"⚠️"}),(0,m.jsx)("p",{children:c})]})}):0===d.length?(0,m.jsx)("div",{className:styles.container,children:(0,m.jsxs)("div",{className:styles.empty,children:[(0,m.jsx)("span",{children:"\uD83D\uDE1E"}),(0,m.jsx)("p",{children:"Nenhum profissional dispon\xedvel para este hor\xe1rio"}),(0,m.jsx)("small",{children:"Tente outro dia ou hor\xe1rio"})]})}):(0,m.jsxs)("div",{className:styles.container,children:[(0,m.jsxs)("div",{className:styles.header,children:[(0,m.jsx)("h3",{children:"\uD83D\uDC65 Profissionais Dispon\xedveis"}),(0,m.jsxs)("span",{className:styles.badge,children:[d.length," profissional(is)"]})]}),d[0]?.recommendation==="highly_recommended"&&(0,m.jsxs)("div",{className:styles.recommendation,children:[(0,m.jsx)("span",{children:"⭐ ALTAMENTE RECOMENDADO"}),(0,m.jsxs)("p",{children:[d[0].name," tem a melhor avalia\xe7\xe3o para este servi\xe7o"]})]}),(0,m.jsx)("div",{className:styles.staffList,children:d.map(e=>(0,m.jsxs)("div",{id:`staff-${e.id}`,className:`${styles.staffCard} ${g===e.id?styles.selected:""}`,onClick:()=>handleSelectStaff(e),children:[(0,m.jsxs)("div",{className:styles.staffHeader,children:[(0,m.jsxs)("div",{className:styles.avatar,children:[e.profile_image?(0,m.jsx)("img",{src:e.profile_image,alt:e.name}):(0,m.jsx)("div",{className:styles.avatarPlaceholder,children:e.name?.charAt(0)?.toUpperCase()}),(0,m.jsx)("div",{className:styles.loadIndicator,style:{backgroundColor:getLoadStatusColor(e.load_status)},title:getLoadStatusLabel(e.load_status)})]}),(0,m.jsxs)("div",{className:styles.basicInfo,children:[(0,m.jsx)("h4",{children:e.name}),(0,m.jsxs)("div",{className:styles.rating,children:["⭐".repeat(Math.floor(e.avg_rating)),(0,m.jsx)("span",{className:styles.ratingNumber,children:e.avg_rating.toFixed(1)}),(0,m.jsxs)("span",{className:styles.ratingCount,children:["(",e.total_completed," servi\xe7os)"]})]}),e.bio&&(0,m.jsx)("p",{className:styles.bio,children:e.bio})]}),"highly_recommended"===e.recommendation&&(0,m.jsx)("div",{className:styles.recommendationBadge,children:"RECOMENDADO"})]}),b!==e.id&&(0,m.jsxs)("div",{className:styles.staffMetrics,children:[(0,m.jsxs)("div",{className:styles.metric,children:[(0,m.jsx)("label",{children:"Carga de Trabalho"}),(0,m.jsx)("div",{className:styles.loadBar,children:(0,m.jsx)("div",{className:styles.loadFill,style:{width:`${100-e.decoded}%`,backgroundColor:getLoadStatusColor(e.load_status)}})}),(0,m.jsxs)("span",{className:styles.metricValue,children:[e.bookings_today,"/6 agendamentos"]})]}),(0,m.jsxs)("div",{className:styles.metric,children:[(0,m.jsx)("label",{children:"Disponibilidade"}),(0,m.jsxs)("span",{className:styles.metricValue,children:[e.decoded,"%"]}),(0,m.jsx)("small",{className:styles.metricLabel,children:getLoadStatusLabel(e.load_status)})]}),(0,m.jsxs)("div",{className:styles.metric,children:[(0,m.jsx)("label",{children:"Pre\xe7o Estimado"}),(0,m.jsxs)("span",{className:styles.price,children:["R$ ",e.estimated_price?.toFixed(2)]}),(0,m.jsx)("small",{className:styles.metricLabel,children:e.bookings_today>0&&"+surge pricing"})]})]}),(0,m.jsxs)("div",{className:styles.action,children:[(0,m.jsx)("button",{className:`${styles.selectButton} ${g===e.id?styles.selected:""}`,onClick:a=>{a.stopPropagation(),handleSelectStaff(e)},children:g===e.id?"✓ Selecionado":"Selecionar"}),(0,m.jsx)("button",{className:styles.expandButton,onClick:a=>{a.stopPropagation(),p(b===e.id?null:e.id)},children:b===e.id?"▲":"▼"})]}),b===e.id&&(0,m.jsxs)("div",{className:styles.expandedDetails,children:[(0,m.jsxs)("div",{className:styles.detailItem,children:[(0,m.jsx)("span",{className:styles.detailLabel,children:"Pr\xf3ximo Agendamento:"}),(0,m.jsx)("span",{className:styles.detailValue,children:e.next_booking_time?new Date(e.next_booking_time).toLocaleTimeString("pt-BR"):"Sem agendamentos"})]}),(0,m.jsxs)("div",{className:styles.detailItem,children:[(0,m.jsx)("span",{className:styles.detailLabel,children:"Score de Aloca\xe7\xe3o:"}),(0,m.jsxs)("span",{className:styles.detailValue,children:[e.final_score,"%"]})]})]})]},e.id))}),(0,m.jsxs)("div",{className:styles.summary,children:[(0,m.jsx)("p",{children:(0,m.jsx)("strong",{children:g?"✓ Profissional selecionado":"Selecione uma profissional acima"})}),g&&(0,m.jsxs)("p",{className:styles.summaryText,children:["Voc\xea ser\xe1 agendado com ",(0,m.jsx)("strong",{children:d.find(e=>e.id===g)?.name})]})]})]})},g=t(86501);function Agendar(){let[e,a]=(0,s.useState)(1),[t,r]=(0,s.useState)(""),[d,i]=(0,s.useState)("09:00"),[o,c]=(0,s.useState)([]),[x,h]=(0,s.useState)(null),[b,p]=(0,s.useState)(""),[f,y]=(0,s.useState)(""),[j,v]=(0,s.useState)(""),[N,k]=(0,s.useState)(""),[w,D]=(0,s.useState)(""),[S,C]=(0,s.useState)(""),[E,_]=(0,s.useState)(!1),[L,A]=(0,s.useState)(!1),[T,P]=(0,s.useState)(!1),R=[{id:1,name:"Limpeza Residencial",price:150,icon:"\uD83C\uDFE0",duration:"2-3h"},{id:2,name:"Limpeza Profunda",price:250,icon:"✨",duration:"4-5h"},{id:3,name:"Limpeza de Vidros",price:100,icon:"\uD83E\uDE9F",duration:"1-2h"},{id:4,name:"Limpeza de Tapetes",price:80,icon:"\uD83E\uDDFD",duration:"1-3h"},{id:5,name:"Limpeza Comercial",price:300,icon:"\uD83C\uDFE2",duration:"3-6h"},{id:6,name:"Limpeza de \xc1reas Externas",price:120,icon:"\uD83C\uDF33",duration:"1-2h"}],handleServiceToggle=e=>{if(o.find(a=>a.id===e))c(o.filter(a=>a.id!==e));else{let a=R.find(a=>a.id===e);c([...o,a])}},calculateTotal=()=>o.reduce((e,a)=>e+a.price,0),handleSubmit=async e=>{if(e.preventDefault(),!t||!b||!f||!N||0===o.length){g.ZP.error("Por favor, preencha todos os campos obrigat\xf3rios");return}_(!0);try{let e=localStorage.getItem("user"),s=e?JSON.parse(e).id:null;if(!s){g.ZP.error("Voc\xea precisa estar logado para agendar"),_(!1);return}let l={userId:s,serviceId:o[0]?.id,date:t,time:d,address:N,phone:f,email:j||"",notes:S||"",durationHours:2,hasStaff:x?1:0,isRecurring:T},n=await (0,u.k_)("/api/bookings",{method:"POST",body:JSON.stringify(l)});n.success||n.id?(g.ZP.success("Agendamento confirmado! Voc\xea receber\xe1 uma confirma\xe7\xe3o em breve."),A(!0),a(1),r(""),p(""),y(""),v(""),k(""),C(""),c([]),h(null),P(!1)):g.ZP.error(n.error||"Erro ao processar agendamento")}catch(e){console.error("Erro ao enviar agendamento:",e),g.ZP.error(e.message||"Erro ao processar agendamento. Tente novamente.")}finally{_(!1)}};return L?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n(),{children:(0,m.jsx)("title",{children:"Agendamento Confirmado - Leidy Cleaner"})}),(0,m.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-white to-gray-50 dark:from-slate-900 dark:to-slate-950",children:(0,m.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-20",children:(0,m.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,m.jsx)("div",{className:"mb-6 text-6xl animate-bounce",children:"✅"}),(0,m.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Agendamento Confirmado!"}),(0,m.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-8",children:"Recebemos sua solicita\xe7\xe3o de agendamento e entraremos em contato em breve para confirmar."}),(0,m.jsxs)("div",{className:"bg-blue-50 dark:bg-slate-800 border-2 border-blue-200 dark:border-blue-600 rounded-xl p-8 mb-8",children:[(0,m.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCDE Voc\xea receber\xe1 uma liga\xe7\xe3o ou mensagem em:"}),(0,m.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:f})]}),(0,m.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,m.jsx)(l(),{href:"/",className:"px-8 py-3 rounded-lg bg-gradient-to-r from-blue-600 to-cyan-500 text-white font-bold hover:shadow-lg transition-all",children:"← Voltar ao Home"}),(0,m.jsx)(l(),{href:"/servicos",className:"px-8 py-3 rounded-lg bg-gray-200 dark:bg-slate-800 text-gray-900 dark:text-white font-bold hover:shadow-lg transition-all",children:"Ver Servi\xe7os →"})]})]})})})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(n(),{children:[(0,m.jsx)("title",{children:"Agendar Servi\xe7o - Leidy Cleaner | Limpeza Premium"}),(0,m.jsx)("meta",{name:"description",content:"Agende seu servi\xe7o de limpeza profissional com a Leidy Cleaner. R\xe1pido, f\xe1cil e seguro."})]}),(0,m.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-white to-gray-50 dark:from-slate-900 dark:to-slate-950",children:(0,m.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16",children:[(0,m.jsxs)("div",{className:"max-w-4xl mx-auto mb-12",children:[(0,m.jsx)("h1",{className:"text-4xl sm:text-5xl font-black text-center mb-4 bg-gradient-to-r from-blue-600 via-cyan-500 to-teal-600 bg-clip-text text-transparent",children:"Agende Seu Servi\xe7o"}),(0,m.jsx)("p",{className:"text-center text-gray-600 dark:text-gray-300 text-lg",children:"Preencha o formul\xe1rio abaixo para solicitar seu agendamento"})]}),(0,m.jsxs)("div",{className:"max-w-4xl mx-auto mb-12",children:[(0,m.jsx)("div",{className:"flex justify-between items-center mb-4",children:[1,2,3,4].map(a=>(0,m.jsxs)("div",{className:"flex flex-col items-center flex-1",children:[(0,m.jsx)("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg mb-2 transition-all ${e>=a?"bg-gradient-to-r from-blue-600 to-cyan-500 text-white":"bg-gray-300 dark:bg-slate-700 text-gray-600 dark:text-gray-400"}`,children:a}),(0,m.jsx)("p",{className:"text-xs sm:text-sm font-semibold text-gray-600 dark:text-gray-400 text-center",children:["Data/Hora","Servi\xe7os","Dados","Resumo"][a-1]})]},a))}),(0,m.jsx)("div",{className:"flex gap-2 h-1",children:[1,2,3,4].map(a=>(0,m.jsx)("div",{className:`flex-1 rounded-full transition-all ${e>=a?"bg-gradient-to-r from-blue-600 to-cyan-500":"bg-gray-300 dark:bg-slate-700"}`},a))})]}),(0,m.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,m.jsxs)("form",{onSubmit:handleSubmit,className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-8 sm:p-12",children:[1===e&&(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-8",children:"Quando voc\xea quer agendar?"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block font-bold text-gray-900 dark:text-white mb-3",children:"\uD83D\uDCC5 Data Desejada"}),(0,m.jsx)("input",{type:"date",value:t,onChange:e=>r(e.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:border-blue-600 focus:outline-none transition-all",min:new Date().toISOString().split("T")[0]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block font-bold text-gray-900 dark:text-white mb-3",children:"\uD83D\uDD52 Hor\xe1rio Preferido"}),(0,m.jsx)("input",{type:"time",value:d,onChange:e=>i(e.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:border-blue-600 focus:outline-none transition-all"})]})]}),t&&d&&o.length>0&&(0,m.jsxs)("div",{className:"mt-8",children:[(0,m.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDC65 Profissionais Dispon\xedveis"}),(0,m.jsx)(components_AvailableStaffWidget,{date:t,time:d,serviceId:o[0]?.id,onSelectStaff:h})]})]}),2===e&&(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-8",children:"Quais servi\xe7os voc\xea precisa?"}),(0,m.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:R.map(e=>(0,m.jsxs)("button",{type:"button",onClick:()=>handleServiceToggle(e.id),className:`p-4 rounded-xl border-2 transition-all text-left ${o.find(a=>a.id===e.id)?"border-blue-600 bg-blue-50 dark:bg-blue-900/30 dark:border-blue-400":"border-gray-300 dark:border-slate-600 hover:border-blue-300"}`,children:[(0,m.jsx)("p",{className:"text-2xl mb-2",children:e.icon}),(0,m.jsx)("p",{className:"font-bold text-gray-900 dark:text-white",children:e.name}),(0,m.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[e.duration," • R$ ",e.price]})]},e.id))}),o.length>0&&(0,m.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-600 rounded-lg p-4",children:(0,m.jsxs)("p",{className:"text-sm font-semibold text-blue-900 dark:text-blue-200",children:["✓ ",o.length," servi\xe7o(s) selecionado(s) - Total: R$ ",calculateTotal()]})}),(0,m.jsxs)("div",{className:"mt-8 p-6 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-slate-800 dark:to-slate-700 rounded-xl border border-purple-200 dark:border-slate-600",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"\uD83D\uDD04 Agendamento Recorrente"}),(0,m.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Economize tempo com limpeza programada automaticamente"})]}),(0,m.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,m.jsx)("input",{type:"checkbox",checked:T,onChange:e=>P(e.target.checked),className:"sr-only peer"}),(0,m.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),T&&(0,m.jsx)("div",{className:"mt-4",children:(0,m.jsx)(RecurringScheduler,{})})]})]}),3===e&&(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-8",children:"Suas Informa\xe7\xf5es"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,m.jsx)("input",{type:"text",placeholder:"Nome Completo *",value:b,onChange:e=>p(e.target.value),className:"px-4 py-3 rounded-lg border-2 border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:border-blue-600 focus:outline-none transition-all",required:!0}),(0,m.jsx)("input",{type:"tel",placeholder:"Telefone (WhatsApp) *",value:f,onChange:e=>y(e.target.value),className:"px-4 py-3 rounded-lg border-2 border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:border-blue-600 focus:outline-none transition-all",required:!0}),(0,m.jsx)("input",{type:"email",placeholder:"Email",value:j,onChange:e=>v(e.target.value),className:"px-4 py-3 rounded-lg border-2 border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:border-blue-600 focus:outline-none transition-all"}),(0,m.jsx)("input",{type:"text",placeholder:"CEP",value:w,onChange:e=>D(e.target.value),className:"px-4 py-3 rounded-lg border-2 border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:border-blue-600 focus:outline-none transition-all"})]}),(0,m.jsx)("input",{type:"text",placeholder:"Endere\xe7o Completo *",value:N,onChange:e=>k(e.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:border-blue-600 focus:outline-none transition-all",required:!0}),(0,m.jsx)("textarea",{placeholder:"Observa\xe7\xf5es especiais (animais de estima\xe7\xe3o, caracter\xedsticas do im\xf3vel, etc)",value:S,onChange:e=>C(e.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:border-blue-600 focus:outline-none transition-all",rows:"4"})]}),4===e&&(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-8",children:"Resumo do Agendamento"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-lg border border-blue-200 dark:border-blue-600",children:[(0,m.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-semibold mb-2",children:"\uD83D\uDCC5 Data e Hora"}),(0,m.jsxs)("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[new Date(t+"T"+d).toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," ","\xe0s ",d]})]}),(0,m.jsxs)("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg border border-purple-200 dark:border-purple-600",children:[(0,m.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-semibold mb-2",children:"✨ Servi\xe7os"}),(0,m.jsxs)("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[o.length," servi\xe7o(s)"]})]}),(0,m.jsxs)("div",{className:"p-6 bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-lg border border-orange-200 dark:border-orange-600",children:[(0,m.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-semibold mb-2",children:"\uD83D\uDC64 Cliente"}),(0,m.jsx)("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:b}),(0,m.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:f})]}),(0,m.jsxs)("div",{className:"p-6 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg border border-green-200 dark:border-green-600",children:[(0,m.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-semibold mb-2",children:"\uD83D\uDCB0 Valor Total"}),(0,m.jsxs)("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:["R$ ",calculateTotal().toFixed(2).replace(".",",")]})]})]}),(0,m.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-700 rounded-lg p-6",children:[(0,m.jsx)("p",{className:"font-bold text-gray-900 dark:text-white mb-4",children:"Servi\xe7os Agendados:"}),(0,m.jsx)("ul",{className:"space-y-2",children:o.map(e=>(0,m.jsxs)("li",{className:"flex justify-between items-center text-gray-700 dark:text-gray-300",children:[(0,m.jsxs)("span",{children:[e.icon," ",e.name]}),(0,m.jsxs)("span",{className:"font-bold",children:["R$ ",e.price]})]},e.id))})]}),(0,m.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-700 rounded-lg p-6",children:[(0,m.jsx)("p",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"\uD83D\uDCCD Localiza\xe7\xe3o"}),(0,m.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:N}),w&&(0,m.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-2",children:["CEP: ",w]})]})]}),(0,m.jsxs)("div",{className:"flex gap-4 justify-between mt-12",children:[(0,m.jsx)("button",{type:"button",onClick:()=>a(Math.max(1,e-1)),disabled:1===e,className:"px-8 py-3 rounded-lg border-2 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-white font-bold hover:bg-gray-50 dark:hover:bg-slate-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"← Anterior"}),e<4?(0,m.jsx)("button",{type:"button",onClick:()=>a(Math.min(4,e+1)),disabled:1===e&&!t||2===e&&0===o.length||3===e&&(!b||!f||!N),className:"px-8 py-3 rounded-lg bg-gradient-to-r from-blue-600 to-cyan-500 text-white font-bold hover:shadow-lg hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Pr\xf3ximo →"}):(0,m.jsx)("button",{type:"submit",disabled:E,className:"px-8 py-3 rounded-lg bg-gradient-to-r from-blue-600 to-cyan-500 text-white font-bold hover:shadow-lg hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:E?"⏳ Processando...":"✅ Confirmar Agendamento"})]})]})})]})})]})}},17159:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agendar",function(){return t(25698)}])},28443:function(e){function webpackEmptyContext(e){var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id=28443,e.exports=webpackEmptyContext}},function(e){e.O(0,[850,644,216,774,336,888,179],function(){return e(e.s=17159)}),_N_E=e.O()}]);