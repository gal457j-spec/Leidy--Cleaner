(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{15373:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return NotificationsPage}});var r=s(67294),t=s(9008),n=s.n(t),d=s(21427),i=s(38810),l=s(85893);function NotificationPreferences(){let{user:e}=(0,r.useContext)(d.Vo),[a,s]=(0,r.useState)({email_enabled:!0,sms_enabled:!1,whatsapp_enabled:!1,push_enabled:!0,reminder_2days:!0,reminder_1day:!0,reminder_1hour:!1,phone_number:""}),[t,n]=(0,r.useState)(!1),[o,c]=(0,r.useState)(""),[x,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{loadPreferences()},[e]);let loadPreferences=async()=>{if(e?.id)try{let a=await (0,i.k_)(`/api/notifications/preferences/${e.id}`);s(a)}catch(e){}},handleToggle=e=>{s(a=>({...a,[e]:!a[e]}))},handlePhoneChange=e=>{s(a=>({...a,phone_number:e.target.value}))},handleSave=async()=>{n(!0),c("");try{await (0,i.k_)(`/api/notifications/preferences/${e.id}`,{method:"PUT",body:JSON.stringify(a)}),c("✅ Prefer\xeancias salvas com sucesso!"),setTimeout(()=>c(""),3e3)}catch(e){c("❌ Erro ao salvar: "+e.message)}finally{n(!1)}},handleSendTest=async a=>{m(!0);try{await (0,i.k_)("/api/notifications/test",{method:"POST",body:JSON.stringify({userId:e.id,type:a})}),c(`✅ ${a.toUpperCase()} de teste enviado!`),setTimeout(()=>c(""),3e3)}catch(e){c("❌ Erro ao enviar: "+e.message)}finally{m(!1)}};return(0,l.jsxs)("div",{className:"max-w-2xl mx-auto p-6 bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"⚙️ Configura\xe7\xf5es de Notifica\xe7\xf5es"}),o&&(0,l.jsx)("div",{className:`mb-4 p-4 rounded ${o.includes("✅")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o}),(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"\uD83D\uDCEC Canais de Notifica\xe7\xe3o"}),(0,l.jsxs)("div",{className:"mb-4 flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:a.email_enabled,onChange:()=>handleToggle("email_enabled"),className:"w-4 h-4 mr-2"}),(0,l.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"\uD83D\uDCE7 Email"})]}),(0,l.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 ml-6",children:"Receber confirma\xe7\xf5es e lembretes por email"})]}),(0,l.jsx)("button",{onClick:()=>handleSendTest("email"),disabled:!a.email_enabled||x,className:"text-sm px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:"Testar"})]}),(0,l.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded",children:[(0,l.jsxs)("label",{className:"flex items-center cursor-pointer mb-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:a.sms_enabled,onChange:()=>handleToggle("sms_enabled"),className:"w-4 h-4 mr-2"}),(0,l.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"\uD83D\uDCF1 SMS"})]}),(0,l.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 ml-6 mb-2",children:"Receber lembretes por SMS"}),a.sms_enabled&&(0,l.jsxs)("div",{className:"ml-6",children:[(0,l.jsx)("input",{type:"tel",placeholder:"+55 51 98030-3740",value:a.phone_number||"",onChange:handlePhoneChange,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-600 text-gray-900 dark:text-white mb-2"}),(0,l.jsx)("button",{onClick:()=>handleSendTest("sms"),disabled:!a.phone_number||x,className:"text-sm px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:"Testar SMS"})]})]}),(0,l.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded",children:[(0,l.jsxs)("label",{className:"flex items-center cursor-pointer mb-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:a.whatsapp_enabled,onChange:()=>handleToggle("whatsapp_enabled"),className:"w-4 h-4 mr-2"}),(0,l.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"\uD83D\uDCAC WhatsApp"})]}),(0,l.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 ml-6 mb-2",children:"Receber notifica\xe7\xf5es via WhatsApp"}),a.whatsapp_enabled&&(0,l.jsxs)("div",{className:"ml-6",children:[(0,l.jsx)("input",{type:"tel",placeholder:"+55 51 98030-3740",value:a.phone_number||"",onChange:handlePhoneChange,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-600 text-gray-900 dark:text-white mb-2"}),(0,l.jsx)("button",{onClick:()=>handleSendTest("whatsapp"),disabled:!a.phone_number||x,className:"text-sm px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50",children:"Testar WhatsApp"})]})]}),(0,l.jsx)("div",{className:"mb-4 flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded",children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:a.push_enabled,onChange:()=>handleToggle("push_enabled"),className:"w-4 h-4 mr-2"}),(0,l.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"\uD83D\uDD14 Notifica\xe7\xf5es Push"})]}),(0,l.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 ml-6",children:"Receber notifica\xe7\xf5es no navegador"})]})})]}),(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"⏰ Quando Receber Lembretes?"}),(0,l.jsxs)("label",{className:"flex items-center mb-3 p-3 bg-gray-50 dark:bg-gray-700 rounded cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:a.reminder_2days,onChange:()=>handleToggle("reminder_2days"),className:"w-4 h-4 mr-3"}),(0,l.jsx)("span",{className:"text-gray-900 dark:text-white",children:"2 dias antes"})]}),(0,l.jsxs)("label",{className:"flex items-center mb-3 p-3 bg-gray-50 dark:bg-gray-700 rounded cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:a.reminder_1day,onChange:()=>handleToggle("reminder_1day"),className:"w-4 h-4 mr-3"}),(0,l.jsx)("span",{className:"text-gray-900 dark:text-white",children:"1 dia antes"})]}),(0,l.jsxs)("label",{className:"flex items-center mb-3 p-3 bg-gray-50 dark:bg-gray-700 rounded cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:a.reminder_1hour,onChange:()=>handleToggle("reminder_1hour"),className:"w-4 h-4 mr-3"}),(0,l.jsx)("span",{className:"text-gray-900 dark:text-white",children:"1 hora antes"})]})]}),(0,l.jsx)("button",{onClick:handleSave,disabled:t,className:"w-full px-6 py-3 bg-blue-600 text-white font-bold rounded hover:bg-blue-700 disabled:opacity-50",children:t?"⏳ Salvando...":"\uD83D\uDCBE Salvar Prefer\xeancias"}),(0,l.jsx)("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900 rounded border border-blue-200 dark:border-blue-700",children:(0,l.jsxs)("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:["\uD83D\uDCA1 ",(0,l.jsx)("strong",{children:"Dica:"}),' Recomendamos ativar pelo menos WhatsApp para reduzir "no-shows". Lembretes autom\xe1ticos reduzem aus\xeancias em 90%!']})})]})}function NotificationsPage(){let{user:e}=(0,r.useContext)(d.Vo),[a,s]=(0,r.useState)("preferences");return e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n(),{children:[(0,l.jsx)("title",{children:"Notifica\xe7\xf5es - Leidy Cleaner"}),(0,l.jsx)("meta",{name:"description",content:"Gerenciar prefer\xeancias de notifica\xe7\xe3o"})]}),(0,l.jsx)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 p-4",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDD14 Central de Notifica\xe7\xf5es"}),(0,l.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Personalize como voc\xea gostaria de receber lembretes sobre agendamentos"})]}),(0,l.jsxs)("div",{className:"flex gap-2 mb-6 border-b border-gray-300 dark:border-gray-700",children:[(0,l.jsx)("button",{onClick:()=>s("preferences"),className:`px-4 py-2 font-medium border-b-2 transition ${"preferences"===a?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"⚙️ Prefer\xeancias"}),(0,l.jsx)("button",{onClick:()=>s("help"),className:`px-4 py-2 font-medium border-b-2 transition ${"help"===a?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"❓ Como Funciona"})]}),(0,l.jsxs)("div",{children:["preferences"===a&&(0,l.jsx)(NotificationPreferences,{}),"help"===a&&(0,l.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-3",children:"\uD83D\uDCE7 Email"}),(0,l.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:"Receba confirma\xe7\xe3o de agendamento e lembretes por email. Ideal para manter um registro."}),(0,l.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["✓ Confirma\xe7\xe3o imediata ap\xf3s agendamento",(0,l.jsx)("br",{}),"✓ Lembretes 2 dias, 1 dia antes",(0,l.jsx)("br",{}),"✓ Resumo da semana"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-3",children:"\uD83D\uDCAC WhatsApp"}),(0,l.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:"Receba mensagens r\xe1pidas e diretas via WhatsApp. A melhor forma para lembretes autom\xe1ticos."}),(0,l.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["✓ Lembretes instant\xe2neos",(0,l.jsx)("br",{}),"✓ F\xe1cil de confirmar pelo app",(0,l.jsx)("br",{}),"✓ Reduz aus\xeancias em 90%",(0,l.jsx)("br",{}),"⚠️ Requer n\xfamero de telefone atualizado"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-3",children:"\uD83D\uDCF1 SMS"}),(0,l.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:"Receba mensagens de texto simples. Funciona em qualquer aparelho."}),(0,l.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["✓ Chega sempre (mesmo sem internet)",(0,l.jsx)("br",{}),"✓ N\xfamero exibido claramente",(0,l.jsx)("br",{}),"⚠️ Requer n\xfamero de telefone atualizado"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-3",children:"\uD83D\uDD14 Notifica\xe7\xf5es Push"}),(0,l.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:"Receba notifica\xe7\xf5es no navegador (se tiver ativado)."}),(0,l.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["✓ R\xe1pida e discreta",(0,l.jsx)("br",{}),"✓ Funciona em smartphone",(0,l.jsx)("br",{}),"⚠️ Requer permiss\xe3o no navegador"]})]}),(0,l.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900 border border-yellow-200 dark:border-yellow-700 rounded p-4",children:[(0,l.jsx)("h4",{className:"font-bold text-yellow-900 dark:text-yellow-100 mb-2",children:"⚠️ Importante"}),(0,l.jsxs)("ul",{className:"text-sm text-yellow-800 dark:text-yellow-200 space-y-1",children:[(0,l.jsx)("li",{children:"✓ Mantenha seu n\xfamero de telefone atualizado para receber SMS/WhatsApp"}),(0,l.jsx)("li",{children:"✓ Confirme seu email para receber confirma\xe7\xf5es"}),(0,l.jsx)("li",{children:"✓ Ative lembretes para reduzir a chance de esquecer agendamentos"}),(0,l.jsx)("li",{children:"✓ Qualquer d\xfavida, entre em contato pelo Chat"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"❓ Perguntas Frequentes"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Como mudo meu telefone para SMS/WhatsApp?"}),(0,l.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Na se\xe7\xe3o de prefer\xeancias, ative SMS ou WhatsApp e insira seu novo n\xfamero. Recomendamos usar formato internacional: +55 51 98030-3740"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Posso receber lembretes em hor\xe1rios espec\xedficos?"}),(0,l.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Sim! Voc\xea pode escolher receber lembretes 2 dias antes, 1 dia antes ou 1 hora antes do agendamento."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"E se eu nunca confirmar o agendamento?"}),(0,l.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Os lembretes s\xe3o informativos - voc\xea n\xe3o precisa confirmar. A equipe chegar\xe1 no hor\xe1rio agendado. Confirmar \xe9 apenas para sua conveni\xeancia."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Como posso desabilitar notifica\xe7\xf5es completamente?"}),(0,l.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:'Desative todos os canais na se\xe7\xe3o "Canais de Notifica\xe7\xe3o". Mesmo sem notifica\xe7\xf5es, mantenha seu agendamento.'})]})]})]})]})})]})]})})]}):(0,l.jsx)("div",{className:"p-4 text-center",children:"⏳ Carregando..."})}},6529:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/notifications",function(){return s(15373)}])}},function(e){e.O(0,[216,774,336,888,179],function(){return e(e.s=6529)}),_N_E=e.O()}]);